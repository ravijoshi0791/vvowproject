<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>IIT Web Conference</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <link rel="stylesheet" href="index.css" type="text/css"></link>
    
    <script src="AC_OETags.js" language="javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script src="json.js" type="text/javascript"></script>
    <script src="common.js" type="text/javascript"></script>
    <script src="restserver.js" type="text/javascript"></script>
    <script src="room.js" type="text/javascript"></script>
		<script src="videoio.js" type="text/javascript"></script>
</head>

<body onload="room.init(); restserver.init(room.on_open, null, room.on_notify, 'div-connecting', 'span-connecting')">

<!-- 
The connecting prompt displays with z-index 100
-->
<div id="div-connecting" class="has-shadow" style="visibility: hidden;">
  <span id="span-connecting"></span>
</div>

<!-- 
The header displays the banner.
-->
<div id="div-header" class="has-shadow">
  <div class="has-gradient"><span class="heading">IIT Web Conference</span></div>
	<span class="footer">For demonstration at
	<a href="http://www.cvent.com/events/7th-annual-real-time-communications-conference-and-expo/event-summary-ffc3acffa5af4bddae7a33f788e37f56.aspx">
	7th Annual Real-Time Communications Conference and Expo</a>, Oct 4-6, 2011, Chicago Area</span>
</div>

<!--
The main view has many tabs: main, conference, preferences, help.
-->
<div id="div-main">
  <ol id="ol-tabs" class="toc">
  <li id="li-first" class="current" onclick="room.on_select_tab('first')">Main</li>
	<li id="li-conference" onclick="room.on_select_tab('conference')">Video Conference</li>
	<li id="li-preferences" onclick="room.on_select_tab('preferences')">Preferences</li>
	<li id="li-help" onclick="room.on_select_tab('help')">Help</li>
  </ol>

  <div id="div-first" class="content has-shadow" style="visibility: visible;">
    <div id="join-conf-box" class="content-box">
      <div class="content-header">Join Existing Web Conference</div>
      <table>
        <tr><td align="right">Your full name:</td><td>
          <input type="text" id="join_name"/>
        </td></tr><tr><td align="right">Select a conference:</td><td>
          <select id="join_room" style="width: 130px;">
				    <option>No Available Conference</option>
          </select>
        </td></tr><tr><td align="right">Moderator password:<br/>(optional)</td><td>
          <input type="password" id="join_password"/>
        </td></tr><tr><td colspan="2" align="center">
          <input type="button" value="  Join  " class="button"
				    onclick="room.join(sanitize($('join_room').value),
																sanitize($('join_name').value),
																sanitize($('join_password').value))"></input>
        </td></tr>
      </table>
	  </div>

    <div id="create-conf-box" class="content-box">
      <div class="content-header">Create New Web Conference</div>
      <table>
        <tr><td align="right">Your full name:</td><td>
          <input type="text" id="create_name"/>
        </td></tr><tr><td align="right">Conference name:</td><td>
          <input type="text" id="create_room"/>
        </td></tr><tr><td align="right">Moderator password:</td><td>
          <input type="password" id="create_password"/>
        </td></tr><tr><td align="right">Password again:</td><td>
          <input type="password" id="create_password2"/>
        </td></tr><tr><td colspan="2" align="center">
          <input type="button" value="Create" class="button"
				    onclick="room.create(sanitize($('create_room').value),
																sanitize($('create_name').value),
																sanitize($('create_password').value),
																sanitize($('create_password2').value))"></input>
        </td></tr>
      </table>
    </div>
		
		<div style="position: absolute; left: 350px; top: 10px;">
				<h3>Minimum Requirements</h3>
				(met by Google Chrome web browser).
				<ol>
          <li>WebSocket support</li>
          <li>Javascript support</li>
          <li>Flash Player version 10.3 or later.</li>
				</ol>
				
				<!--script type="text/javascript" language="JavaScript">
        var hasProductInstall = DetectFlashVer(6, 0, 65);
        var hasRequiredVersion = DetectFlashVer(10, 3, 0);
				if (hasProductInstall && !hasRequiredVersion) {
				  var MMPlayerType = (isIE == true) ? "ActiveX" : "PlugIn";
          var MMredirectURL = window.location;
          document.title = document.title.slice(0, 47) + " - Flash Player Installation";
          var MMdoctitle = document.title;

          AC_FL_RunContent(
								"src", "playerProductInstall",
								"FlashVars", "MMredirectURL="+MMredirectURL+'&MMplayerType='+MMPlayerType+'&MMdoctitle='+MMdoctitle+"",
								"width", "240",
								"height", "180",
								"align", "middle",
								"id", "video1",
								"quality", "high",
								"bgcolor", "#ffffff",
								"wmode", "transparent",
								"name", "video1",
								"allowScriptAccess","always",
								"type", "application/x-shockwave-flash",
								"pluginspage", "http://www.adobe.com/go/getflashplayer"
				  );
				}
				</script-->
				
				<div id="main_error" style="color: #800000;"></div>
				
				<!-- for privacy settings of Flash Player
        <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
            id="privacy" width="240" height="180"
            codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab">
            <param name="movie" value="VideoIO45.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#ffffff" />
						<param name="wmode" value="transparent" />
            <param name="allowScriptAccess" value="always" />
            <embed src="VideoIO45.swf" quality="high" bgcolor="#ffffff"
                width="240" height="180" name="privacy" align="middle"
                play="true" loop="false" quality="high"
								wmode="transparent" allowScriptAccess="always"
                type="application/x-shockwave-flash"
                pluginspage="http://www.adobe.com/go/getflashplayer">
            </embed>
        </object>
				-->
				
		</div>
    
  </div>

  <div id="div-conference" class="content has-shadow" style="visibility: hidden;">
    <div id="user-list-box" class="content-box">
      <div class="content-header">Participants
				<img id="hand-icon" src="hand_icon_16x16.png" class="hand-icon" title="click here to raise/unraise hand"
				    onclick="room.raise_hand()"></img>
				<img id="document-icon" src="document_icon_16x16.png" class="document-icon" title="click here to share slides"
				    onclick="room.share_slides()"></img>
      </div>
      <div id="user-list">
        <ul id="participants" class="participants">
        </ul>
      </div>
	  </div>
    <div id="text-chat-box" class="content-box">
      <div class="content-header">Text Chat</div>
      <div id="chat-history"></div>
      <div id="chat-input">

				<input id="inputText" type="text" style="left: 2px; width: 190px;" autocomplete="off"
				  title="Type your message here and press enter"
					value="Enter your message here" 
					onclick="if ($('inputText').value == 'Enter your message here') {
							$('inputText').value = '';
						}"
					onkeypress="javascript: if ((event.keyCode || event.which) == 13) {
						room.process_command($('inputText').value);
						$('inputText').value = ''; 
						return false; 
					}"/> 
      </div>
	  </div>
    <div id="videos-box"></div> <!-- don't put any text node in videos-box -->
  </div>

  <div id="div-preferences" class="content has-shadow" style="visibility: hidden; overflow: auto;">
    <div class="content-box" style="width: 330px;">
      <div class="content-header">Change Moderator Password</div>
      <table width="100%">
        <tr><td align="right">Enter current password:</td><td>
          <input type="password" id="change_moderator_password_current"/>
        <tr><td align="right">Enter new password:</td><td>
          <input type="password" id="change_moderator_password"/>
        <tr><td align="right">Re-enter new password:</td><td>
          <input type="password" id="change_moderator_password2"/>
        </td></tr><tr><td colspan="2" align="center">
          <input id="save-moderator-password" type="button" value="Save" class="button"
				    onclick="room.change_moderator_password(sanitize($('change_moderator_password_current').value),
																sanitize($('change_moderator_password').value),
																sanitize($('change_moderator_password2').value))"></input>
        </td></tr>
      </table>
    </div>
		<br/>
		<!--
    <div class="content-box" style="width: 330px;">
      <div class="content-header">Private Conference</div>
      <table width="100%">
        </td></tr><tr><td>Is this a private conference:</td><td>
          <input type="checkbox" id="change_private"/>
        </td></tr><tr><td>If yes, enter participant code:</td><td>
          <input type="password" id="change_participant_password"/>
        </td></tr><tr><td>Re-enter participant code:</td><td>
          <input type="password" id="change_participant_password2"/>
        </td></tr><tr><td colspan="2" align="center">
          <input id="save-private-settings" type="button" value="Save" class="button"
				    onclick="room.change_privacy(sanitize($('change_private').checked),
																sanitize($('change_participant_password').value),
																sanitize($('change_participant_password2').value))"></input>
        </td></tr>
      </table>
    </div>
		<br/>
		-->
    <div class="content-box" style="width: 330px;">
      <div class="content-header">Conference Settings</div>
      <table width="100%">
        </td></tr><tr><td align="right">Is this a persistent conference:</td><td>
          <input type="checkbox" id="change_persistent"/>
        </td></tr><tr><td align="right">Auto-start new participant's video:</td><td>
          <input type="checkbox" id="change_video_auto"/>
        </td></tr><tr><td align="right">Allow HTML in text chat:</td><td>
          <input type="checkbox" id="change_allow_html"/>
        </td></tr><tr><td align="right">Show header banner at top:</td><td>
          <input type="checkbox" id="change_show_header" checked/>
        </td></tr><tr><td align="right">Show footer banner at bottom:</td><td>
          <input type="checkbox" id="change_show_footer" checked/>
        </td></tr><tr><td colspan="2" align="center">
          <input id="save-conference-settings" type="button" value="Save" class="button"
				    onclick="room.change_conference_settings($('change_persistent').checked,$('change_video_auto').checked,$('change_allow_html').checked,$('change_show_header').checked,$('change_show_footer').checked)"></input>
        </td></tr>
      </table>
    </div>
		
    <div class="content-box" style="width: 330px; position: absolute; left: 360px; top: 10px;">
      <div class="content-header">Media and Device Settings</div>
			<script type="text/javascript">
        var hasRequiredVersion = DetectFlashVer(10, 3, 0);
				if (hasRequiredVersion) {
				  document.write("You have Flash Player 10.3 or later");
				} else {
				  document.write("You DO NOT have Flash Player 10.3. <a href='http://get.adobe.com/flashplayer/'>Go get Flash</a>.");
				}
			</script>
			<br/>
			Please click on "Allow" and "Remember" below.<br/>
			<center>
			  <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
            id="privacy" width="216" height="139"
            codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab">
            <param name="movie" value="VideoIO45.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#ffffff" />
						<param name="wmode" value="transparent" />
            <param name="allowScriptAccess" value="always" />
            <embed src="VideoIO45.swf" quality="high" bgcolor="#ffffff"
                width="216" height="139" name="privacy" align="middle"
                play="true" loop="false" quality="high"
								wmode="transparent" allowScriptAccess="always"
                type="application/x-shockwave-flash"
                pluginspage="http://www.adobe.com/go/getflashplayer">
            </embed>
        </object>
			</center>
			<br/>
    </div>
		
		<!--
    <div class="content-box" style="width: 330px; position: absolute; left: 360px; top: 290px;">
      <div class="content-header">Visual Layout</div>
			<center>
				
				<input type="button" value="Save" class="button"
					onclick="room.change_moderator_password(sanitize($('change_moderator_password_current').value),
																sanitize($('change_moderator_password').value),
																sanitize($('change_moderator_password').value))"></input>
			</center>
		</div>
		-->
		
    <div id="preferences-error" style="color: #800000; position: absolute; left: 360px; top: 320px;"></div>
				
  </div>
  
  <div id="div-help" class="content has-shadow" style="visibility: hidden;">
    <h3>What is IIT Web Conference?</h3>
		This is a web application to enable multiparty audio/video conference and slides presentation.
		<br/>
		TODO: fill in more details
  </div>
</div>

<!--
The footer area displays copyright information and links to project resources.
-->
<div id="div-footer" class="has-shadow">
  <div class="has-gradient">
    <span class="heading">Links to Project Resources</span>
    <span class="copyright">&copy; 2010-2011, 
      <a href="http://kundansingh.com">Kundan Singh</a>, All Rights Reserved.</span>
  </div>
  <span class="footer">
    <a href="https://sites.google.com/site/vvowproject" target="_blank">Voice and Video on Web,</a>
    <a href="http://code.google.com/p/flash-videoio" target="_blank">Flash-based Audio and Video Communication</a>,
		<a href="http://tools.ietf.org/html/draft-sinnreich-sip-web-apis-01" target="_blank">SIP APIs for web communications</a>
  </span>
</div>

<script type="text/javascript">
room.init();
</script>

</body>
</html>